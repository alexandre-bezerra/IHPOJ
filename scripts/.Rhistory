library(haven)
library(dplyr)
library(stringr)
library(lubridate)
setwd("~/Progamacao/R/Dados PNADC 2019-2020 - PIBIC/Git/IHPOJ/scripts")
pnad_completo <- readRDS("microdados_filtrados_idade_apenas.RDS")
microdados <- microdados %>%
mutate(Ano = as.numeric(Ano),
Trimestre = as.numeric(Trimestre),
id_pessoa = as.character(ind_id)) %>%
select(c("hous_id", "id_pessoa", "Ano", "Trimestre", "V1022",
"UF", "V2007", "V2009","V2010"))
# Criando um novo dataframe com o filtro
microdados <- pnad_completo %>%
filter(V2009 >= 14, V2009 <= 29)  # variável de idade
rm(pnad_completo) # apagando dataframe antigo
microdados <- microdados %>%
mutate(Ano = as.numeric(Ano),
Trimestre = as.numeric(Trimestre),
id_pessoa = as.character(ind_id)) %>%
select(c("hous_id", "id_pessoa", "Ano", "Trimestre", "V1022",
"UF", "V2007", "V2009","V2010"))
microdados <- readRDS("microdados_filtrados_idade_apenas.RDS")
microdados <- microdados %>%
mutate(Ano = as.numeric(Ano),
Trimestre = as.numeric(Trimestre),
id_pessoa = as.character(ind_id)) %>%
select(c("hous_id", "id_pessoa", "Ano", "Trimestre", "V1022",
"UF", "V2007", "V2009","V2010","VD4001","VD4002"))
View(microdados)
# Criação de variável ocupacional
microdados <- microdados %>%
mutate(estado_ocupacional = case_when(
VD4001 == 1 & VD4002 == 1 ~ 1,  # Ocupado
VD4001 == 1 & VD4002 == 2 ~ 0,  # Desocupado
TRUE ~ NA_real_
))
################################################################################
# 5 - Exportação de dados filtrados ############################################
################################################################################
saveRDS(microdados, "microdados_filtrados.RDS")
